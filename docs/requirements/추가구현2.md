# 추가 구현 2 - 실시간 알림 기능

본 문서는 메신저의 확장 기능 중 서버에서 클라이언트로 전송되는 실시간 알림(Push) 기능에 대한 API 스펙을 정의합니다.

## 공통 사항
* 본 문서의 모든 API는 [기본 메시지 API 문서](message-api-spec.md)에 정의된 **보안 고려사항** 및 **공통 메시지 구조**를 따릅니다.

---

## 실시간 알림 (서버 → 클라이언트)

> 클라이언트의 요청 없이 서버가 특정 이벤트 발생 시 클라이언트에게 직접 전송하는 메시지입니다.

### 새 메시지 알림 (`PUSH-NEW-MESSAGE`)

> `type` 필드는 `TEXT` 또는 `FILE` 값을 가집니다. `FILE` 타입인 경우 `fileName`과 `fileSize` 정보가 포함되며, 클라이언트는 해당 정보를 바탕으로 파일을 다운로드할지 결정할 수 있습니다. (본 스펙에서는 편의상 메시지 전송과 함께 데이터가 전달되는 구조를 따르나, 대용량 처리를 위해 별도의 다운로드 요청 스펙을 추가할 수 있습니다.)

```json
{
  "header": {
    "type": "PUSH-NEW-MESSAGE",
    "timestamp": "2024-01-09T12:00:05Z"
  },
  "data": {
    "roomId": 123456789,
    "messageId": 1122334455,
    "senderId": "alice",
    "content": "Hello everyone!",
    "type": "TEXT",
    "fileName": null,
    "fileSize": 0
  }
}
```

### 채팅방 입장 알림 (`PUSH-ROOM-ENTER`)

```json
{
  "header": {
    "type": "PUSH-ROOM-ENTER",
    "timestamp": "2024-01-09T12:00:10Z"
  },
  "data": {
    "roomId": 123456789,
    "userId": "marco",
    "userName": "마르코"
  }
}
```

### 채팅방 퇴장 알림 (`PUSH-ROOM-EXIT`)

```json
{
  "header": {
    "type": "PUSH-ROOM-EXIT",
    "timestamp": "2024-01-09T12:00:15Z"
  },
  "data": {
    "roomId": 123456789,
    "userId": "marco"
  }
}
```
